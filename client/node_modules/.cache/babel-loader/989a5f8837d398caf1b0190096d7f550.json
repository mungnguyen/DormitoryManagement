{"ast":null,"code":"/*!\n * Tobi - Cookie\n * Copyright(c) 2010 LearnBoost <dev@learnboost.com>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\nvar url = require('url');\n/**\n * Initialize a new `Cookie` with the given cookie `str` and `req`.\n *\n * @param {String} str\n * @param {IncomingRequest} req\n * @api private\n */\n\n\nvar Cookie = exports = module.exports = function Cookie(str, req) {\n  this.str = str; // Map the key/val pairs\n\n  str.split(/ *; */).reduce(function (obj, pair) {\n    var p = pair.indexOf('=');\n    var key = p > 0 ? pair.substring(0, p).trim() : pair.trim();\n    var lowerCasedKey = key.toLowerCase();\n    var value = p > 0 ? pair.substring(p + 1).trim() : true;\n\n    if (!obj.name) {\n      // First key is the name\n      obj.name = key;\n      obj.value = value;\n    } else if (lowerCasedKey === 'httponly') {\n      obj.httpOnly = value;\n    } else {\n      obj[lowerCasedKey] = value;\n    }\n\n    return obj;\n  }, this); // Expires\n\n  this.expires = this.expires ? new Date(this.expires) : Infinity; // Default or trim path\n\n  this.path = this.path ? this.path.trim() : req ? url.parse(req.url).pathname : '/';\n};\n/**\n * Return the original cookie string.\n *\n * @return {String}\n * @api public\n */\n\n\nCookie.prototype.toString = function () {\n  return this.str;\n};\n\nmodule.exports.Jar = require('./jar');","map":null,"metadata":{},"sourceType":"script"}